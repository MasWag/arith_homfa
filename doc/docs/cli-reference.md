# 7. Command-Line Reference

## 7.1 Global CLI layout

`ahomfa_util [--verbose|--quiet] <subcommand> [options]`

Key subcommands:

| Subcommand | Purpose |
| --- | --- |
| `ckks genkey` / `tfhe genkey` | Generate secret keys. |
| `ckks genrelinkey` | Produce a CKKS relinearization key. |
| `tfhe genbkey` | Produce a TFHE bootstrapping key, requires both CKKS and TFHE secrets. |
| `ckks enc` / `ckks dec` | Encrypt/decrypt plaintext traces. |
| `tfhe enc` / `tfhe dec` | Encrypt/decrypt TFHE payloads. |
| `ltl2spec` | Translate LTL/STL formulas into DFA specs. |
| `spec2spec` | Transform DFA specs (reverse, negate, minimize). |

Each subcommand has `-h/--help` for the exhaustive flag list; see `doc/ahomfa_util.md` for the current autogenerated synopsis.

## 7.2 Configuration files

- CKKS config JSON (see `examples/config.json`) defines polynomial modulus degree, coefficient modulus, initial scale, and slot count.
- Monitor executables accept `-c <config>` to load those parameters; CLI utilities share the same format.
- Precedence: CLI flags override config defaults; some monitors honor environment variables (e.g., `SPDLOG_LEVEL`) for logging tweaks, but there is no repository-wide tmpdir override.

## 7.3 Input formats

- **Traces.** Plaintext traces are whitespace-separated numeric matrices (one timestamp per line). `ckks enc` reads from stdin by default.
- **Specifications.** `ltl2spec` consumes strings such as `G(p0 -> F[0,5] p1)` expressed in Spot syntax and outputs DFA descriptions understood by `libahomfa_runner`.
- **Keys.** Binary blobs on disk; keep CKKS/TFHE private keys secret.

## 7.4 Output formats

- CKKS ciphertexts (`*.ckks`) and TFHE ciphertexts (`*.tfhe`) are opaque binary streams.
- CLI utilities log to stdout/stderr; use `--quiet` for scripting.
- Some monitors log JSON via spdlog; set `SPDLOG_LEVEL=debug` to enable extra traces.

## 7.5 Environment variables

- `SPDLOG_LEVEL`: adjust runtime log level emitted by monitors and utilities.
- `SEAL_THROW_ON_TRANSPARENT=1`: ask SEAL to abort if a ciphertext becomes transparent (useful during predicate development).
- OpenMP knobs such as `OMP_DISPLAY_ENV=TRUE` or `OMP_NUM_THREADS`: inspect thread placement or throttle parallelism for encrypted runs.
